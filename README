Prerequisities: 
Wordcount Jar to be on S3 already, with a certain Main class (see implementation)
Input text file uploaded to S3.
EC2 key has been generated with name 'adrian'

Output goes to S3 and can be seen in the Amazon UI.

Remove s3:// protocol on output folder (second commandline arg) to write to HDFS instead

TODO
run on lab and compare times to EMR
run on HDFS and download data and compare times to S3
reuse running instance (and start if not found)

DATA LOCALITY/REDUNDANCY
s3 input splits are read in multiple HTTP range requests. This is simply a way for HTTP to request a portion of the file instead of the 
entire file (for example, GET FILE X Range: byte=0-10000). no need for replication 
VM's can potentially be co-located on a single VM but this is statistically very unlikely due to size of cluster (.5 million)
EBS (attached storage) is available but this does not exist on EMR instances (it does on beanstalk)
HDFS: a cluster with 10 core nodes of type m1.large would have 2833 GB of space available to HDFS: ( 10 nodes x 850 GB per node ) / replication factor of 3.

/home/hadoop/lib/emr-s3distcp-1.0.jar  --src s3://poobar/shak2.txt --dest /root/adrian


PRESENTATION
http://aws.amazon.com/elasticmapreduce/
Amazon EMR pricing is per instance hour and starts at $.015 per instance hour for a small instance ($131.40 per year).

STARTING 5 mins
Cluster instances
BOOTSTRAPPING 3 mins
config Hadoop (core, site, hdfs, mapred, yarn), 
config Daemons heap, GC (jobtracker, tasktracker, sn, dn)
Run scripts e.g. install applications, e.g. spark shark,;   
RUNNING 1 sec
SHUTTING_DOWN 2 mins
Configure shutdown action;
COMPLETED




For Amazon replication factor is 3 for a cluster of 10 or more nodes, 2 for a cluster 4-9 nodes, and 1 for a cluster with 3 or fewer nodes (same for us?)

Upload 5GB
local -> lab2 120mins
local -> s3   90 mins  (download about same)
s3 -> hdfs    15 mins

Wordcount for 
12 large nodes = 6.5 minutes
6 medium nodes = 33 minutes (2 slots/instance)
6 small nodes = 			(2 slots/instance)
lab2 = 6pm started

